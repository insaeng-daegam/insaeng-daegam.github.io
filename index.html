<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸ìƒëŒ€ê° - ê³ í’ˆê²© íš¡ì¬ìˆ˜ ë¶„ì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    <style>
        body { font-family: 'Pretendard', sans-serif; background-color: #FDF5E6; color: #4E342E; }
        .gold-point { color: #D4AF37; }
        
        .gold-wave {
            background: linear-gradient(90deg, #D4AF37, #E1C16E, #4E342E, #D4AF37);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: shine 3s linear infinite;
        }
        @keyframes shine {
            to { background-position: 200% center; }
        }

        input, select { 
            background-color: #F8F9FA !important; 
            border: 1px solid #F0F0F0 !important; 
            color: #4E342E !important;
        }
        input::placeholder { color: #A0A0A0; }
        input:focus, select:focus { border-color: #D4AF37 !important; outline: none; }
        select { appearance: auto; }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 100; align-items: center; justify-content: center; padding: 20px; }
        .modal-content { background: white; padding: 30px; border-radius: 30px; width: 100%; max-width: 450px; max-height: 80vh; overflow-y: auto; }
        .modal-body-text { font-size: 13px; line-height: 1.8; color: #555; text-align: justify; }
        
        .custom-chk { width: 1.25rem; height: 1.25rem; cursor: pointer; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4">

    <header class="text-center mb-10">
        <h1 class="text-3xl font-extrabold mb-2">ì¸ìƒëŒ€ê°</h1>
        <p class="gold-wave font-bold text-lg">ê³ í’ˆê²© íš¡ì¬ìˆ˜ ë¶„ì„ ë¦¬í¬íŠ¸</p>
    </header>

    <main class="w-full max-w-md bg-white rounded-[40px] shadow-sm p-10">
        <div class="space-y-6">
            <div>
                <label class="block text-sm font-bold mb-3">ì„±í•¨</label>
                <input type="text" id="name" class="w-full p-4 rounded-2xl" placeholder="ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>

            <div>
                <label class="block text-sm font-bold mb-3">íœ´ëŒ€í° ë²ˆí˜¸</label>
                <input type="tel" id="phone" class="w-full p-4 rounded-2xl" placeholder="01012345678 (ìˆ«ìë§Œ ì…ë ¥)">
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-bold mb-3">ìƒë…„ì›”ì¼</label>
                    <input type="number" id="birth" class="w-full p-4 rounded-2xl" placeholder="19950815">
                </div>
                <div>
                    <label class="block text-sm font-bold mb-3">íƒœì–´ë‚œ ì‹œê°„</label>
                    <div class="flex gap-2">
                        <select id="ampm" class="w-1/2 p-4 rounded-2xl text-sm font-medium">
                            <option value="ì˜¤ì „" selected>ì˜¤ì „</option>
                            <option value="ì˜¤í›„">ì˜¤í›„</option>
                            <option value="ëª¨ë¦„">ëª¨ë¦„</option>
                        </select>
                        <input type="text" id="birth-time" class="w-1/2 p-4 rounded-2xl text-sm" placeholder="ì‹œ/ë¶„">
                    </div>
                </div>
            </div>

            <div class="pt-4 border-t border-gray-50">
                <div class="flex items-center mb-6 bg-[#F8F7F3] p-5 rounded-2xl cursor-pointer" id="all-agree-area">
                    <input type="checkbox" id="all-agree" class="custom-chk mr-3 accent-[#4E342E]">
                    <span class="font-bold text-base">ëª¨ë“  ì•½ê´€ì— ì „ì²´ ë™ì˜í•˜ê¸°</span>
                </div>
                
                <div class="space-y-4 px-2 text-sm text-gray-400">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center">
                            <input type="checkbox" id="privacy-agree" class="sub-agree custom-chk mr-2 accent-[#4E342E]">
                            <span>[í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</span>
                        </div>
                        <button onclick="openModal('privacy')" class="text-gray-400 underline">ë³´ê¸°</button>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="flex items-center">
                            <input type="checkbox" id="terms-agree" class="sub-agree custom-chk mr-2 accent-[#4E342E]">
                            <span>[í•„ìˆ˜] ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€</span>
                        </div>
                        <button onclick="openModal('terms')" class="text-gray-400 underline">ë³´ê¸°</button>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="flex items-center">
                            <input type="checkbox" id="marketing-agree" class="sub-agree custom-chk mr-2 accent-[#4E342E]">
                            <span>[ì„ íƒ] ë§ˆì¼€íŒ… í™œìš© ë™ì˜</span>
                        </div>
                        <button onclick="openModal('marketing')" class="text-gray-400 underline">ë³´ê¸°</button>
                    </div>
                </div>
            </div>

            <button onclick="runAnalysis()" id="submit-btn" class="w-full py-5 bg-[#4E342E] text-white rounded-[25px] text-xl font-bold mt-4 shadow-lg active:scale-95 transition-all">
                ë¬´ë£Œ íš¡ì¬ìˆ˜ ë¶„ì„ ì‹œì‘
            </button>
        </div>
    </main>

    <footer class="mt-12 text-center">
        <p class="text-[11px] text-gray-300">Â© 2026 ì¸ìƒëŒ€ê° Insaeng Daegam. All Rights Reserved.</p>
    </footer>

    <div id="legalModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle" class="text-lg font-bold mb-4 text-[#4E342E]"></h3>
            <div id="modalBody" class="modal-body-text whitespace-pre-wrap"></div>
            <button onclick="closeModal()" class="w-full mt-6 py-3 bg-[#4E342E] text-white rounded-xl font-bold">í™•ì¸ ë° ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        const legalContents = {
            privacy: {
                title: "ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜ (í•„ìˆ˜)",
                content: "ì¸ìƒëŒ€ê° ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘ ë° ì´ìš©í•©ë‹ˆë‹¤.\n\n1. ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ í•­ëª©\n- í•„ìˆ˜í•­ëª©: ì„±ëª…, íœ´ëŒ€í° ë²ˆí˜¸, ìƒë…„ì›”ì¼, íƒœì–´ë‚œ ì‹œê°„\n\n2. ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘ ë° ì´ìš© ëª©ì \n- ëª…ë¦¬í•™ ê¸°ë°˜ì˜ ì‚¬ì£¼ ë¶„ì„ ë° ìš´ì„¸ ê²°ê³¼(ì˜¤í–‰ ë° íš¡ì¬ìˆ˜ ë¦¬í¬íŠ¸) ì œê³µ\n- ì´ìš©ì ì‹ë³„ ë° ì„œë¹„ìŠ¤ ë¶€ì •ì´ìš© ë°©ì§€\n\n3. ê°œì¸ì •ë³´ì˜ ë³´ìœ  ë° ì´ìš© ê¸°ê°„\n- ì´ìš©ìì˜ ê°œì¸ì •ë³´ëŠ” ì„œë¹„ìŠ¤ ì œê³µ ëª©ì  ë‹¬ì„± í›„ ì§€ì²´ ì—†ì´ íŒŒê¸°í•˜ëŠ” ê²ƒì„ ì›ì¹™ìœ¼ë¡œ í•©ë‹ˆë‹¤.\n- ë‹¨, ê´€ê³„ ë²•ë ¹ì— ì˜ê±° ë³´ì¡´ì´ í•„ìš”í•œ ê²½ìš° í•´ë‹¹ ê¸°ê°„ ë³´ê´€í•©ë‹ˆë‹¤.\n\n4. ë™ì˜ ê±°ë¶€ ì‹œ ë¶ˆì´ìµ\n- ê·€í•˜ëŠ” ë™ì˜ë¥¼ ê±°ë¶€í•  ê¶Œë¦¬ê°€ ìˆìœ¼ë‚˜, í•„ìˆ˜ í•­ëª© ë¯¸ë™ì˜ ì‹œ ë¶„ì„ ì„œë¹„ìŠ¤ ì´ìš©ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤."
            },
            terms: {
                title: "ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ (í•„ìˆ˜)",
                content: "ì œ1ì¡° (ëª©ì )\në³¸ ì•½ê´€ì€ ì¸ìƒëŒ€ê°ì´ ì œê³µí•˜ëŠ” ìš´ì„¸ ë¶„ì„ ì„œë¹„ìŠ¤ì˜ ì´ìš© ì¡°ê±´ ë° ì ˆì°¨ë¥¼ ê·œì •í•©ë‹ˆë‹¤.\n\nì œ2ì¡° (ë¶„ì„ ê²°ê³¼ì˜ ì„±ê²©)\n1. ë³¸ ì„œë¹„ìŠ¤ëŠ” ëª…ë¦¬í•™ì  ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì°¸ê³ ìš© ì½˜í…ì¸ ì…ë‹ˆë‹¤.\n2. ì„œë¹„ìŠ¤ ê²°ê³¼ê°’ì€ ê³¼í•™ì  ì‚¬ì‹¤ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë©° í•´ì„ì— ë”°ë¼ ê°œì¸ì°¨ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.\n\nì œ3ì¡° (ì±…ì„ ì œí•œ)\n- ëª¨ë“  ê²°ê³¼ëŠ” ì´ìš©ìì˜ ì£¼ê´€ì  íŒë‹¨ì„ ìœ„í•œ ì°¸ê³  ìë£Œì¼ ë¿ì´ë©°, ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í–‰í•œ íˆ¬ì, ê³„ì•½ ë“±ì˜ ê²°ê³¼ì— ëŒ€í•´ íšŒì‚¬ëŠ” ì±…ì„ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\nì œ4ì¡° (ê¸ˆì§€ì‚¬í•­)\n- íƒ€ì¸ ì •ë³´ ë„ìš© ë° ì‹œìŠ¤í…œ ë°©í•´ í–‰ìœ„ ì‹œ ì„œë¹„ìŠ¤ ì´ìš©ì´ ì œí•œë©ë‹ˆë‹¤."
            },
            marketing: {
                title: "ë§ˆì¼€íŒ… í™œìš© ë™ì˜ (ì„ íƒ)",
                content: "ì¸ìƒëŒ€ê°ì˜ ìœ ìµí•œ í˜œíƒ ì •ë³´ë¥¼ ë°›ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n1. í™œìš© ëª©ì \n- ì‹ ê·œ ì„œë¹„ìŠ¤ ì•Œë¦¼, ì´ë²¤íŠ¸ ì •ë³´ ë° í• ì¸ í˜œíƒ ì œê³µ\n\n2. ë³´ìœ  ê¸°ê°„\n- ì„œë¹„ìŠ¤ ì¢…ë£Œ ì‹œ ë˜ëŠ” ë™ì˜ ì² íšŒ ì‹œê¹Œì§€ ë³´ê´€í•©ë‹ˆë‹¤.\n\n3. ë™ì˜ ê±°ë¶€ ê¶Œë¦¬\n- ê±°ë¶€í•˜ì‹œë”ë¼ë„ ë¬´ë£Œ ë¶„ì„ ì„œë¹„ìŠ¤ ì´ìš©ì—ëŠ” ì œí•œì´ ì—†ìŠµë‹ˆë‹¤."
            }
        };

        function openModal(type) {
            document.getElementById('modalTitle').innerText = legalContents[type].title;
            document.getElementById('modalBody').innerText = legalContents[type].content;
            document.getElementById('legalModal').style.display = 'flex';
        }

        function closeModal() { document.getElementById('legalModal').style.display = 'none'; }

        const allAgreeChk = document.getElementById('all-agree');
        const subAgreeChks = document.querySelectorAll('.sub-agree');

        document.getElementById('all-agree-area').onclick = function(e) {
            if (e.target !== allAgreeChk) allAgreeChk.checked = !allAgreeChk.checked;
            subAgreeChks.forEach(chk => chk.checked = allAgreeChk.checked);
        };

        subAgreeChks.forEach(chk => {
            chk.addEventListener('change', () => {
                const checkedCount = document.querySelectorAll('.sub-agree:checked').length;
                allAgreeChk.checked = (checkedCount === subAgreeChks.length);
            });
        });

        async function runAnalysis() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const privacyOk = document.getElementById('privacy-agree').checked;
            const termsOk = document.getElementById('terms-agree').checked;

            if(!name) return alert("ì„±í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            if(!phone) return alert("íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            if(!privacyOk || !termsOk) return alert("í•„ìˆ˜ í•­ëª©ì— ë™ì˜í•˜ì…”ì•¼ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.");

            const btn = document.getElementById('submit-btn');
            btn.innerText = "ëŒ€ê°ë‹˜ì´ ì‚¬ì£¼ë¥¼ ë¶„ì„ ì¤‘...";
            btn.disabled = true;

            try {
                const response = await fetch('/.netlify/functions/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        name: name, 
                        phone: phone, 
                        birth: document.getElementById('birth').value, 
                        time: document.getElementById('ampm').value + " " + document.getElementById('birth-time').value,
                        marketing: document.getElementById('marketing-agree').checked,
                        language: "ko"
                    })
                });
                
                const data = await response.json();
                
                // í–‰ìš´ ê´€ë ¨ 4ê°œ í•­ëª©ì— ì´ëª¨í‹°ì½˜ ì¶”ê°€ ì ìš©
                alert(`ğŸ® ëŒ€ê°ë‹˜ì˜ ì •ë°€ ë¶„ì„ ê²°ê³¼ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤ ğŸ®\n\n` +
                      `â— íƒ€ê³ ë‚œ ë³¸ì‹ (æœ¬èº«) ê¸°ìš´: ${data.fiveElements || 'í† (åœŸ)ì˜ ê¸°ìš´'}\n` +
                      `â— ë¶€ì¡±í•¨ì„ ì±„ìš°ëŠ” í–‰ìš´ ê¸°ìš´: ${data.luckyEnergy || 'ëª©(æœ¨)ì˜ ê¸°ìš´'}\n` +
                      `* ë³¸ì‹ ì˜ ê¸°ìš´ì´ ê°•í•˜ë”ë¼ë„, í–‰ìš´ì˜ ê¸°ìš´ì„ ê°€ê¹Œì´í•´ì•¼ ë°œë³µ(ç™¼ç¦)í•©ë‹ˆë‹¤.\n` +
                      `------------------------------------------\n` +
                      `â— ğŸ¨ í–‰ìš´ì˜ ìƒ‰: ${data.luckyColor || 'ì²­ìƒ‰ ë° ë…¹ìƒ‰ ê³„ì—´'}\n` +
                      `â— ğŸ€ í–‰ìš´ì˜ ë²ˆí˜¸: ${data.luckyNumber || '3, 8'}\n` +
                      `â— ğŸ§­ í–‰ìš´ì˜ ë°©í–¥: ${data.luckyDirection || 'ë™ìª½ ë° ë‚¨ë™ìª½'}\n` +
                      `â— ğŸ”® í–‰ìš´ì˜ ë¬¼ê±´: ${data.luckyObject || 'ë‚˜ë¬´ ì†Œì¬ì˜ ì†Œí’ˆì´ë‚˜ í™”ë¶„'}`);
                
            } catch (e) {
                console.log("ë¶„ì„ ì„œë²„ ì—°ê²° ëŒ€ê¸° ì¤‘...");
                alert("í˜„ì¬ ê¸°ìš´ì„ ëª¨ìœ¼ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì‹­ì‹œì˜¤.");
            } finally {
                btn.innerText = "ë¬´ë£Œ íš¡ì¬ìˆ˜ ë¶„ì„ ì‹œì‘";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>